<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Mangal;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;}
@font-face
	{font-family:"PT Sans Narrow";}
@font-face
	{font-family:"Open Sans";}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:120%;
	font-size:11.0pt;
	font-family:"Open Sans";
	color:#695D46;}
h1
	{margin-top:24.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:130%;
	page-break-after:avoid;
	font-size:18.0pt;
	font-family:"PT Sans Narrow";
	color:#FF5E0E;}
h2
	{margin-top:16.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	font-size:16.0pt;
	font-family:"PT Sans Narrow";
	color:#008575;
	font-weight:normal;}
h3
	{margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	font-size:14.0pt;
	font-family:"PT Sans Narrow";
	color:#695D46;
	font-weight:normal;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{margin-top:16.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	font-size:42.0pt;
	font-family:"PT Sans Narrow";
	color:#695D46;
	font-weight:bold;}
.MsoChpDefault
	{font-family:"Open Sans";
	color:#695D46;}
.MsoPapDefault
	{margin-top:6.0pt;
	line-height:120%;}
 /* Page Definitions */
 @page WordSection1
	{size:8.5in 11.0in;
	margin:.75in 1.0in .75in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body bgcolor=white lang=EN-US>

<div class=WordSection1>

<h2 style='margin-top:0in;line-height:120%;border:none'><a name="_z6ne0og04bp5"></a><span
lang=EN style='font-size:12.0pt;line-height:120%;font-family:"Open Sans";
color:windowtext'><img width=621 height=11 id=image1.png
src="AzureEventGrid-GitHub%20Integration_files/image001.gif"
alt="horizontal line"></span><span lang=EN style='font-size:12.0pt;line-height:
120%;font-family:"Open Sans";color:windowtext'> </span></h2>

<p class=MsoNormal style='border:none'><span lang=EN><img width=621 height=414
id=image3.jpg src="AzureEventGrid-GitHub%20Integration_files/image002.jpg"
alt="Placeholder image"></span></p>

<p class=MsoTitle style='border:none'><a name="_2gazcsgmxkub"></a><span
lang=EN>Azure Event Grid - GitHub Integration</span></p>

<p class=MsoNormal style='margin-top:0in;border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;border:none'><span lang=EN
style='font-size:16.0pt;line-height:120%;font-family:"PT Sans Narrow";
color:#008575'>ML-Ops team GitHub India</span></p>

<p class=MsoNormal style='margin-top:0in;border:none'><span lang=EN
style='font-size:16.0pt;line-height:120%;font-family:"PT Sans Narrow";
color:#008575'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;border:none'><span lang=EN
style='font-size:16.0pt;line-height:120%;font-family:"PT Sans Narrow";
color:#008575'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;border:none'><span lang=EN
style='font-size:16.0pt;line-height:120%;font-family:"PT Sans Narrow";
color:#008575'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;border:none'><span lang=EN
style='font-size:16.0pt;line-height:120%;font-family:"PT Sans Narrow";
color:#008575'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;border:none'><span lang=EN
style='font-size:16.0pt;line-height:120%;font-family:"PT Sans Narrow";
color:#008575'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;border:none'><span lang=EN
style='font-size:16.0pt;line-height:120%;font-family:"PT Sans Narrow";
color:#008575'>&nbsp;</span></p>

<h1 style='border:none'><a name="_au51mny0sx6"></a><span lang=EN>Overview</span></h1>

<p class=MsoNormal style='border:none'><span lang=EN>Azure Machine
Learning(AML) services, is an offering for the DataScientists and Machine
learning Engineers from Azure. </span></p>

<p class=MsoNormal style='border:none'><span lang=EN>GitHub is a source control
as a service, which allows you to also perform CI/CD tasks using GitHub Actions
and Workflows. </span></p>

<p class=MsoNormal style='border:none'><span lang=EN>When machine learning code
exists in GitHub and the infrastructure is in AML. </span></p>

<p class=MsoNormal style='border:none'><span lang=EN>AML along with other azure
services like Storage, KeyVault, creates different types of events which can be
of interest to users to initiate CI/CD tasks inside GitHub based on these
events. </span></p>

<p class=MsoNormal style='border:none'><span lang=EN>We identified one problem
like this for long running machine learning processes, where pre training and
post training workflows required to be triggered. </span></p>

<p class=MsoNormal style='border:none'><span lang=EN>With the current approach
of GitHub Actions present for azure machine learning <a
href="https://github.com/Azure/aml-template"><span style='color:#1155CC'>https://github.com/Azure/aml-template</span></a></span></p>

<p class=MsoNormal style='border:none'><span lang=EN>Allow users to connect
between AML and GitHub, but they lack asynchronous behaviors. </span></p>

<p class=MsoNormal style='border:none'><span lang=EN>For example aml-run action
has to wait for training to complete if you want to register the model or
deploy the model after training. </span></p>

<p class=MsoNormal style='border:none'><span lang=EN>That means the whole
training-test-deploy is mostly a single workflow, which runs almost
synchronously.</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>In this project we
identified different infrastructure that can be deployed for users along with
AML , which can link together GitHub and Azure Machine Learning.</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>We try to deep dive into
the resources and what all considerations are kept while coming to this
solution</span></p>

<h1 style='border:none'><a name="_3at9u9s4e0vp"></a><span lang=EN>Goals</span></h1>

<ol style='margin-top:0in' start=1 type=1>
 <li class=MsoNormal style='border:none'><span lang=EN>Explain various
     requirements and solutions for the same</span></li>
 <li class=MsoNormal style='border:none'><span lang=EN>Explain different
     components and considerations while using them.</span></li>
 <li class=MsoNormal style='border:none'><span lang=EN>GitHub actions take the
     burden off the user's head to learn azure machine learning SDK for various
     tasks so users can focus on machine learning rather than learning
     services. We indented to complement these action by providing event model
     to build and release process</span></li>
</ol>

<h1 style='border:none'><a name="_4p7xi5bvhxdr"></a><span lang=EN>Specifications</span></h1>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>The document is intended
for people with basic understanding of below resources in Azure and GitHub.
This document does not intend to describe these services in detail as they are
fairly available and enough documentation exists for them. </span></p>

<p class=MsoNormal style='border:none'><span lang=EN>This document underlines
how these resources are used together or intended to be used to provide a end
to end solution for Github users for machine learning.</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<h2 style='border:none'><a name="_56kfpodyq5td"></a><span lang=EN>Azure Machine
Learning Services</span></h2>

<h2><a name="_8i2dl4d4uqv1"></a><span lang=EN>Azure API Management</span></h2>

<h2><a name="_clcg0a6nvql"></a><span lang=EN>Azure Functions/Function App</span></h2>

<h2><a name="_mpx5qwgv1bsj"></a><span lang=EN>Azure Event Grid</span></h2>

<h2><a name="_jcemwyyzcqi3"></a><span lang=EN>Azure KeyVault</span></h2>

<h2><a name="_eqcdzt55kubm"></a><span lang=EN>Azure Resource Manager Templates</span></h2>

<h2><a name="_gi8dojqfb195"></a><span lang=EN>GitHub - Workflows</span></h2>

<h2><a name="_xu48o74a00mg"></a><span lang=EN>GitHub - Actions</span></h2>

<h2><a name="_ly6q0cspgq02"></a><span lang=EN>GitHub - Events</span></h2>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN>Kindly proceed after getting some basic
understanding of these terms. </span></p>

<h1 style='border:none'><a name="_yyrhu7ml5bea"></a><span lang=EN>Milestones</span></h1>

<h2 style='margin-left:.5in;text-indent:-.5in;border:none'><a
name="_buwz1tcz7y35"></a><span lang=EN><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>I.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN>Phase 1</span></h2>

<p class=MsoNormal style='margin-left:.5in;border:none'><span lang=EN>Understanding
the ML-ops flow.</span></p>

<h2 style='margin-left:.5in;text-indent:-.5in;border:none'><a
name="_p2nityf5kx5q"></a><span lang=EN><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span>II.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN>Phase 2</span></h2>

<p class=MsoNormal style='margin-left:.5in;border:none'><span lang=EN>Replacing
key components which the user had to create, by GitHub Actions and Workflows. </span></p>

<p class=MsoNormal style='margin-left:.5in;border:none'><span lang=EN>Understanding
the problem at hand in depth.</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<h2 style='margin-left:.5in;text-indent:-.5in'><a name="_nijay95z8a3t"></a><span
lang=EN><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span>III.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN>Phase 3</span></h2>

<p class=MsoNormal style='margin-left:.5in'><span lang=EN>De-coupling Build and
Release blocks of the pipeline using Azure supported infrastructure. </span></p>

<p class=MsoNormal style='margin-left:.5in;border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:.5in;border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:.5in;border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.0pt;line-height:normal'><span
lang=EN><a href="#_au51mny0sx6"><span style='color:#5B0F00'>Overview</span></a></span></p>

<p class=MsoNormal style='margin-top:10.0pt;line-height:normal'><span lang=EN><a
href="#_3at9u9s4e0vp"><span style='color:#5B0F00'>Goals</span></a></span></p>

<p class=MsoNormal style='margin-top:10.0pt;line-height:normal'><span lang=EN><a
href="#_4p7xi5bvhxdr"><span style='color:#5B0F00'>Specifications</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_56kfpodyq5td"><span style='color:#5B0F00'>Azure Machine Learning
Services</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_8i2dl4d4uqv1"><span style='color:#1155CC'>Azure API Management</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_clcg0a6nvql"><span style='color:#1155CC'>Azure Functions/Function App</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_mpx5qwgv1bsj"><span style='color:#1155CC'>Azure Event Grid</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_jcemwyyzcqi3"><span style='color:#1155CC'>Azure KeyVault</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_eqcdzt55kubm"><span style='color:#1155CC'>Azure Resource Manager
Templates</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_gi8dojqfb195"><span style='color:#1155CC'>GitHub - Workflows</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_xu48o74a00mg"><span style='color:#1155CC'>GitHub - Actions</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_ly6q0cspgq02"><span style='color:#1155CC'>GitHub - Events</span></a></span></p>

<p class=MsoNormal style='margin-top:10.0pt;line-height:normal'><span lang=EN><a
href="#_yyrhu7ml5bea"><span style='color:#5B0F00'>Milestones</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_buwz1tcz7y35"><span style='color:#5B0F00'>Phase 1</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_p2nityf5kx5q"><span style='color:#5B0F00'>Phase 2</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_nijay95z8a3t"><span style='color:#1155CC'>Phase 3</span></a></span></p>

<p class=MsoNormal style='margin-top:10.0pt;line-height:normal'><span lang=EN><a
href="#_10wqt5pi4krv"><span style='color:#1155CC'>Current ML-Ops Flow</span></a></span></p>

<p class=MsoNormal style='margin-top:10.0pt;line-height:normal'><span lang=EN><a
href="#_8pws0zbsw83p"><span style='color:#1155CC'>Problem at Hand</span></a></span></p>

<p class=MsoNormal style='margin-top:10.0pt;line-height:normal'><span lang=EN><a
href="#_y3b30udc03s8"><span style='color:#1155CC'>ARM Templates</span></a></span></p>

<p class=MsoNormal style='margin-top:10.0pt;line-height:normal'><span lang=EN><a
href="#_omlyg46zzi5x"><span style='color:#1155CC'>UnderStanding Azure Function</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_uti9i6hlyllv"><span style='color:#5B0F00'>Security</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_1voefh6eg1yn"><span style='color:#5B0F00'>Create host key</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;line-height:normal'><span lang=EN><a
href="#_r4zhq8di1n1b"><span style='color:#5B0F00'>Retrieve host key</span></a></span></p>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0in;margin-bottom:4.0pt;
margin-left:.25in;line-height:normal'><span lang=EN><a href="#_mbzm7wu3kgg5"><span
style='color:#1155CC'>Azure Event Grid and GitHub Integration</span></a></span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:.5in;border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:.5in;border:none'><span lang=EN>&nbsp;</span></p>

<h1><a name="_10wqt5pi4krv"></a><span lang=EN>Current ML-Ops Flow</span></h1>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>The current ML-Ops flow
end to end looks like the diagram below, with 3 important steps and each step
is performed by a different actor. </span></p>

<p class=MsoNormal style='border:none'><span lang=EN>Each step in general needs
various sub actions to complete the tasks.  It is clear that all 3 things done
by a single persona are quite overwhelming and thus need support. </span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='border:none'><span lang=EN><img border=0 width=624
height=354 id=image9.png
src="AzureEventGrid-GitHub%20Integration_files/image003.gif"></span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>These different actions
are converted into GitHub Actions and support writing CI/CD workflows for a
user in GitHub. ( some are still under development)</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='border:none'><span lang=EN><img border=0 width=624
height=373 id=image11.png
src="AzureEventGrid-GitHub%20Integration_files/image004.gif"></span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>List of these actions and
supported templates can be found here</span></p>

<p class=MsoNormal style='border:none'><span lang=EN><a
href="https://github.com/machine-learning-apps/ml-template-azure"><span
style='color:#1155CC'>https://github.com/machine-learning-apps/ml-template-azure</span></a></span></p>

<p class=MsoNormal style='border:none'><span lang=EN><a
href="https://github.com/Azure/aml-template"><span style='color:#1155CC'>https://github.com/Azure/aml-template</span></a></span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>These actions used inside
GitHub Workflows comprise a single flow which can be used to complete this
cycle. </span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>Single GitHub Workflow - <a
href="https://github.com/machine-learning-apps/ml-template-azure/blob/runconfig_python/.github/workflows/train_deploy.yml"><span
style='color:#1155CC'>Train-deploy.yml</span></a></span></p>

<p class=MsoNormal style='border:none'><span lang=EN><img border=0 width=629
height=906 id=image6.png
src="AzureEventGrid-GitHub%20Integration_files/image005.gif"></span></p>

<p class=MsoNormal style='border:none'><span lang=EN>These actions help to
connect to Azure Machine learning services from GitHub workflows on behalf of
users using the service principal added to github secrets.
(secrets.AZURE_CREDENTIALS)</span></p>

<p class=MsoNormal style='border:none'><b><i><span lang=EN>Note : for more
information please visit the above given two repositories</span></i></b></p>

<h1><a name="_8pws0zbsw83p"></a><span lang=EN>Problem at Hand</span></h1>

<p class=MsoNormal><span lang=EN>Current implementation doesnt inherently
support the de-coupling of build and deploy, part. So the workflow waits till
training is completed in Azure Machine Learning. </span></p>

<p class=MsoNormal><span lang=EN>These machine learning training can go as long
as hours or days. </span></p>

<p class=MsoNormal><span lang=EN><img border=0 width=624 height=365
id=image13.png src="AzureEventGrid-GitHub%20Integration_files/image006.gif"></span></p>

<p class=MsoNormal><span lang=EN>If we see what we want to do is to submit the
training and when training is completed get some events and trigger the deploy
part.</span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN><img border=0 width=624 height=392
id=image7.png src="AzureEventGrid-GitHub%20Integration_files/image007.gif"></span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN>Events like Run Completion, Model Registered,
Model Deployed and Data Drift Detected can be captured to trigger another
workflow.</span></p>

<p class=MsoNormal><span lang=EN>But today , the two systems do not talk to
each other seamlessly. </span></p>

<p class=MsoNormal><span lang=EN>Azure Machine Learning  uses Event Grid to
generate different events, and GitHub uses a repository_dispatch webhook to
trigger a workflow together. </span></p>

<p class=MsoNormal><span lang=EN>Now to achieve this user has to do a lot of
plumbing between two systems, like either putting a Logic-App or Function App
which can act as a receiver and transmitter of events. </span></p>

<p class=MsoNormal><span lang=EN>This would mean the user will have to
understand a third system, and implement the logic for that. </span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN>This means that a few resources are to be
deployed and configured so the decoupling can be achieved , but again keeping
the details abstracted from user</span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<h1><a name="_ayslr29z2wnl"></a><span lang=EN>Solution</span></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>To achieve this,
we are targeting to deploy the infrastructure, as part of initialization, which
will enable all coupling easily.</span></p>

<p class=MsoNormal><span lang=EN>These resources will be deployed the first
time a user sets up his repository or can be deployed anytime users run a
workflow for deployment. We can imagine it as a setup workflow triggered.</span></p>

<p class=MsoNormal><span lang=EN>To achieve this we targeted 3 components </span></p>

<p class=MsoNormal><span lang=EN>1: A GitHub repository where all the code to
be deployed to azure is kept. This code essentially contains logic to receive
events from Event Grid and Send a repository dispatch event.</span></p>

<p class=MsoNormal><span lang=EN>2: A GitHub action which will be used to
deploy above code for users using the ARM templates.</span></p>

<p class=MsoNormal><span lang=EN>3: A sample Template repository to explain to
users how they can use all of this together, by giving several workflow
examples.</span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'><img border=0
width=624 height=316 id=image10.png
src="AzureEventGrid-GitHub%20Integration_files/image008.gif"></span></p>

<h1><a name="_y3b30udc03s8"></a><span lang=EN>ARM Templates </span></h1>

<p class=MsoNormal><span lang=EN>Azure Resource Manager templates are
configurations which describe the resources to be deployed on Azure. ARM
templates are also de-facto standard templates for enterprise solutions. </span></p>

<p class=MsoNormal><span lang=EN>We provide already baked in ARM templates in
the Sample repository, which contains all the necessary configurations for
deploying the resources. </span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN><img border=0 width=303 height=563
id=image8.png src="AzureEventGrid-GitHub%20Integration_files/image009.gif"><img
border=0 width=306 height=563 id=image5.png
src="AzureEventGrid-GitHub%20Integration_files/image010.gif"></span></p>

<p class=MsoNormal><span lang=EN>Users can choose to change the configuration,
by making modifications in the parameters file, along with the templates. </span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<h1><a name="_xgi6emkpeg4b"></a><span lang=EN>Azure Function App Repository </span></h1>

<p class=MsoNormal><span lang=EN>A function repository, which contains the
necessary logic to listen to the event from Azure ML and send a repository
dispatch to the GitHub repository. </span></p>

<p class=MsoNormal><span lang=EN>An example repository is here</span></p>

<p class=MsoNormal><span lang=EN><a
href="https://github.com/mlopstemplates/function_app"><span style='color:#1155CC'>https://github.com/mlopstemplates/function_app</span></a></span></p>

<p class=MsoNormal><span lang=EN>It essentially contains a few Azure functions
to act as a webhook, which are registered with Azure Event Grid and receive the
events from it. </span></p>

<p class=MsoNormal><i><span lang=EN>Currently the Azure functions are not very
secure and follow anonymous authentication, but the section below describes the
long term changes.</span></i></p>

<h2><a name="_gxzn8rxcgbe2"></a><span lang=EN>UnderStanding Azure Function and
Security Handling</span></h2>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>Azure </span><span
lang=EN><a href="https://docs.microsoft.com/en-us/azure/azure-functions/"><span
style='font-size:11.5pt;line-height:120%;font-family:"Arial",sans-serif;
color:#1982D1;text-decoration:none'>Functions</span></a></span><span lang=EN
style='font-size:11.5pt;line-height:120%;font-family:"Arial",sans-serif;
color:#373737'> allow you to create microservices triggered by events, after
which they run their code, Functions are perfect for the event-driven
architectures we strive for these days. These events can come from </span><span
lang=EN><a
href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-triggers-bindings"><span
style='font-size:11.5pt;line-height:120%;font-family:"Arial",sans-serif;
color:#1982D1;text-decoration:none'>various sources</span></a></span><span
lang=EN style='font-size:11.5pt;line-height:120%;font-family:"Arial",sans-serif;
color:#373737'>, like when a message is available in Service Bus, timers, an
event sent from Event Grid, etc. However, the one we still use a lot is an HTTP
trigger, where we expose the Function as a REST endpoint, available for
consumers to call into.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>As an
architectural guideline, every REST endpoint needs to be exposed through Azure
API Management. Therefore, we intend to expose these HTTP triggered Functions
via API Management as well.  Also guidelines are that everything is deployed as
Infrastructure as Code, so we do this through ARM templates. We dive into the
security side of this, and how to set this up in ARM.</span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:9.0pt;margin-left:
0in;line-height:120%;background:white'><a name="_uti9i6hlyllv"></a><span
lang=EN>Security</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>When working
with HTTP triggered Functions, there are several options for setting up their
security. These consist of having anonymous authorization, where we dont need
to provide any API key, or using a function or master key. Of course, we will
normally not use anonymous authorization, as we are exposing our data and
processes, and as such want to limit access to these. Consequently, when
exposing our Functions through API Management, we will create our Function App
with a specific host key for this service.</span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:9.0pt;margin-left:
0in;line-height:120%;background:white'><a name="_1voefh6eg1yn"></a><span
lang=EN>Create host key</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>To create this
host key, we can use the following snippet in our ARM template for our Function
App.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;line-height:normal;background:white'><span lang=EN
style='font-size:11.5pt;font-family:"Arial",sans-serif;color:#373737;
background:lime'>{<br>
    &quot;type&quot;: &quot;Microsoft.Web/sites/host/functionKeys&quot;,<br>
    &quot;apiVersion&quot;: &quot;2018-11-01&quot;,<br>
    &quot;name&quot;: &quot;[concat(parameters('functionAppName'),
'/default/apimanagement')]&quot;,<br>
    &quot;properties&quot;: {<br>
        &quot;name&quot;: &quot;api-management&quot;<br>
    }<br>
}</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>Since this is a
host key, we place it into the <i>default</i> host. Alternatively, if we were
creating a function key, we would have replaced this with the Function name.</span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:9.0pt;margin-left:
0in;line-height:120%;background:white'><a name="_r4zhq8di1n1b"></a><span
lang=EN>Retrieve host key</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>Now that our
Function App has been deployed, we can create a Function in it which gets
exposed through API Management. In our case, we deploy the Function App from a
Git repository. </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><b><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>TODO: Add
Snippet of arm template that does this</span></b><span lang=EN
style='font-size:11.5pt;line-height:120%;font-family:"Arial",sans-serif;
color:#373737'>. </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>Next, we need to
retrieve the host key of the Function App in API Management and use this in the
configuration of the </span><span lang=EN><a
href="https://docs.microsoft.com/en-us/azure/templates/microsoft.apimanagement/2019-01-01/service/backends"><span
style='font-size:11.5pt;line-height:120%;font-family:"Arial",sans-serif;
color:#1982D1;text-decoration:none'>backend</span></a></span><span lang=EN
style='font-size:11.5pt;line-height:120%;font-family:"Arial",sans-serif;
color:#373737'>, which creates a link between API Management and the Function.
For this we use the </span><span lang=EN><a
href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-template-functions-resource#listkeys"><i><span
style='font-size:11.5pt;line-height:120%;font-family:"Arial",sans-serif;
color:#1982D1;text-decoration:none'>listkeys </span></i></a></span><span
lang=EN style='font-size:11.5pt;line-height:120%;font-family:"Arial",sans-serif;
color:#373737'>function, similar to retrieving an </span><span lang=EN><a
href="https://blog.eldert.net/retrieve-azure-storage-access-keys-in-arm-template/"><span
style='font-size:11.5pt;line-height:120%;font-family:"Arial",sans-serif;
color:#1982D1;text-decoration:none'>Azure Storage access key</span></a></span><span
lang=EN style='font-size:11.5pt;line-height:120%;font-family:"Arial",sans-serif;
color:#373737'>.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>&nbsp;</span></p>

<table class=a border=1 cellspacing=0 cellpadding=0 width=625 style='margin-left:
 4.25pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=625 valign=top style='width:468.75pt;border:solid black 1.0pt;
  background:#F3F3F3;padding:5.0pt 5.0pt 5.0pt 5.0pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
  margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
  line-height:120%;font-family:"Arial",sans-serif;color:#373737'>{<br>
      &quot;type&quot;: &quot;Microsoft.ApiManagement/service/backends&quot;,<br>
      &quot;apiVersion&quot;: &quot;2019-01-01&quot;,<br>
      &quot;name&quot;: &quot;[concat(parameters('apiManagementInstanceName'),
  '/', parameters('functionAppName'))]&quot;,<br>
      &quot;dependsOn&quot;: [<br>
          &quot;[resourceId('Microsoft.ApiManagement/service',
  parameters('apiManagementInstanceName'))]&quot;<br>
      ],<br>
      &quot;properties&quot;: {<br>
          &quot;url&quot;: &quot;[concat('https://',
  parameters('functionAppName'), '.azurewebsites.net/api')]&quot;,<br>
          &quot;protocol&quot;: &quot;http&quot;,<br>
          &quot;resourceId&quot;: &quot;[concat('https://management.azure.com/subscriptions/',
  subscription().subscriptionId, '/resourceGroups/', resourceGroup().name,
  '/providers/Microsoft.Web/sites/', parameters('functionAppName'))]&quot;,<br>
          &quot;credentials&quot;: {<br>
              &quot;header&quot;: {<br>
                  &quot;x-functions-key&quot;: [<br>
                      &quot;[listkeys(concat(variables('functionAppId'),
  '/host/default/'),'2016-08-01').functionKeys.apimanagement]&quot;<br>
                  ]<br>
              }<br>
          }<br>
      }<br>
  }</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>After
deployment, we will find that our Function is now available via API Management,
without the need to create any secrets ourselves. </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25in;
margin-left:0in;background:white'><span lang=EN style='font-size:11.5pt;
line-height:120%;font-family:"Arial",sans-serif;color:#373737'>The example ARM
template to deploy the resources with this post can be found at  </span><span
lang=EN><a href="https://github.com/mlopstemplates/arm_templates"><span
style='font-size:11.5pt;line-height:120%;font-family:"Arial",sans-serif;
color:#1155CC'>GitHub page.</span></a></span></p>

<h3><a name="_u6jltp4vq0xv"></a><span lang=EN>&nbsp;</span></h3>

<h3><a name="_jkxerd94n1xm"></a><span lang=EN>Function Triggers </span></h3>

<p class=MsoNormal style='border:none'><span lang=EN>We are currently
registering the deployed functions to Event Grid using ARM template as a
webhook. </span></p>

<p class=MsoNormal style='border:none'><span lang=EN>Moving forward we can also
extend this functionality to listen to Storage Triggers.</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;margin-left:
0in;line-height:107%'><a name="_orv65ds5rrkw"></a><span lang=EN>Standardizing
the Events from Function app</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>Azure Event Grid for Machine learning services today gives today
following event</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black;background:yellow'>&quot;Microsoft.MachineLearningServices.ModelRegistered&quot;,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black;background:yellow'> &quot;Microsoft.MachineLearningServices.ModelDeployed&quot;,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black;background:yellow'>&quot;Microsoft.MachineLearningServices.RunCompleted&quot;,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black;background:yellow'> &quot;Microsoft.MachineLearningServices.DatasetDriftDetected&quot;,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black;background:yellow'> &quot;Microsoft.MachineLearningServices.RunStatusChanged&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>These events must be mapped properly in the client payload and
accessed via github event object </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-size:9.0pt;
line-height:107%;font-family:"Courier New";color:#24292E;background:white'>[</span><span
lang=EN style='font-size:9.0pt;line-height:107%;font-family:"Courier New";
color:#032F62;background:white'>&quot;event_type&quot;</span><span lang=EN
style='font-size:9.0pt;line-height:107%;font-family:"Courier New";color:#24292E;
background:white'>] </span><span lang=EN style='font-size:9.0pt;line-height:
107%;font-family:"Courier New";color:#D73A49;background:white'>=</span><span
lang=EN style='font-size:9.0pt;line-height:107%;font-family:"Courier New";
color:#24292E;background:white'> </span><span lang=EN style='font-size:9.0pt;
line-height:107%;font-family:"Courier New";color:#032F62;background:white'>&quot;command&quot;</span><span
lang=EN style='font-size:9.0pt;line-height:107%;font-family:"Courier New";
color:#24292E;background:white'>, [</span><span lang=EN style='font-size:9.0pt;
line-height:107%;font-family:"Courier New";color:#032F62;background:white'>&quot;client_payload&quot;</span><span
lang=EN style='font-size:9.0pt;line-height:107%;font-family:"Courier New";
color:#24292E;background:white'>] </span><span lang=EN style='font-size:9.0pt;
line-height:107%;font-family:"Courier New";color:#D73A49;background:white'>=</span><span
lang=EN style='font-size:9.0pt;line-height:107%;font-family:"Courier New";
color:#24292E;background:white'> client_payload</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-size:9.0pt;
line-height:107%;font-family:"Courier New";color:#032F62;background:white'>github.event.client_payload</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>Thus users can write workflows based on those events.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>Event Mapping Standardization </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>Thus each event coming from Event Grid is mapped to a standard
event that will be sent as event_type in the respository_dispatch request</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>These events are documented into the repository and also present
as an output of the resource deployment.</span></p>

<p class=MsoNormal style='border:none'><span lang=EN><a
href="https://github.com/mlopstemplates/function_app/blob/master/README.md"><span
style='color:#1155CC'>https://github.com/mlopstemplates/function_app/blob/master/README.md</span></a></span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>Using Template Engine </span></p>

<p class=MsoNormal style='border:none'><span lang=EN>We are also investigating
the part where incoming schema can be converted to repository dispatch schema
automatically for all the event types.</span></p>

<h3><a name="_oq9hi19ffdao"></a><span lang=EN>Registering with Azure Event Grid</span></h3>

<p class=MsoNormal><span lang=EN>These functions need to get registered with
Event Grid, this is done by adding these functions as webhook. </span></p>

<p class=MsoNormal><span lang=EN>The incoming webhook request follows the event
grid schema and provides the necessary information to function to create the
payload for Github Repository Dispatch. </span></p>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<h1><a name="_1mc88dmidyd4"></a><span lang=EN>Template Repository </span></h1>

<p class=MsoNormal style='border:none'><span lang=EN>The template repository
contains below workflows, which act as an example for users to start with</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN><a
href="https://github.com/mlopstemplates/aml_infra"><span style='font-family:
"Calibri",sans-serif;color:#1155CC'>https://github.com/mlopstemplates/aml_infra</span></a></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<ol style='margin-top:0in' start=1 type=1>
 <li class=MsoNormal style='color:black;margin-top:0in;line-height:107%'><span
     lang=EN style='font-family:"Calibri",sans-serif'>Deploy_infra.yml : this
     workflow deploys all the resources using the ARM templates and Github
     Action. </span></li>
 <li class=MsoNormal style='color:black;margin-top:0in;line-height:107%'><span
     lang=EN style='font-family:"Calibri",sans-serif'>Train.yml : this workflow
     triggers when change in the training code is observed</span></li>
 <li class=MsoNormal style='color:black;margin-top:0in;margin-bottom:8.0pt;
     line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif'>Deploy.yml
     : this workflow triggers on repository dispatch even coming from azure
     function</span></li>
</ol>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'><img border=0 width=403 height=401 id=image4.png
src="AzureEventGrid-GitHub%20Integration_files/image011.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>Finally this is how the top level system looks like. User is free
to write the workflow based on the events as he wishes to.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'><img border=0 width=624 height=485 id=image12.png
src="AzureEventGrid-GitHub%20Integration_files/image012.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:.5in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.0pt;
margin-left:0in;line-height:107%'><span lang=EN style='font-family:"Calibri",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal style='border:none'><span lang=EN>&nbsp;</span></p>

</div>

</body>

</html>
